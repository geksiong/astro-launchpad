---
import { getCollection } from 'astro:content';

import BaseLayout from '@layouts/BaseLayout.astro';

import {generateTagData} from '@utils/helpers.js';

const allPosts = await getCollection('posts');
//const allPosts = await Astro.glob('../**/*.md');
const allTagsUnique = new Set();

allPosts.forEach(post => {
  post.data.tags && post.data.tags.map(tag => {
    allTagsUnique.add(tag);
  })
})

const allTagsData = generateTagData(allTagsUnique);

let content = {
  title: "Tags",
}
---

<BaseLayout content={content.title}>
  <h2>{content.title}</h2>
  <ul>
    {allTagsData.map(tag => (
      <li><a href={`/posts/tags/${tag.slug}`}>{tag.name}</a></li>
    ))}
  </ul>
</BaseLayout>
